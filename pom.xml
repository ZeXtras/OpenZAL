<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>

  <groupId>com.zextras</groupId>
  <artifactId>open-zal</artifactId>
  <version>0.0.1-SNAPSHOT</version>
  <packaging>pom</packaging>

  <properties>
    <zimbra.version>8.8.15</zimbra.version>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    <jackson.version>2.8.11</jackson.version>
    <junit.version>4.13.1</junit.version>
    <maven.compiler.source>1.8</maven.compiler.source>
    <maven.compiler.target>1.8</maven.compiler.target>
    <commit.id>0</commit.id>
  </properties>

  <dependencyManagement>
    <dependencies>
      <dependency>
        <groupId>com.google.code.findbugs</groupId>
        <artifactId>jsr305</artifactId>
        <version>3.0.2</version>
      </dependency>

      <dependency>
        <groupId>com.fasterxml.jackson.core</groupId>
        <artifactId>jackson-databind</artifactId>
        <version>${jackson.version}</version>
      </dependency>

      <dependency>
        <groupId>commons-io</groupId>
        <artifactId>commons-io</artifactId>
        <version>1.4</version>
      </dependency>

      <dependency>
        <groupId>commons-dbutils</groupId>
        <artifactId>commons-dbutils</artifactId>
        <version>1.6</version>
      </dependency>

      <dependency>
        <groupId>dom4j</groupId>
        <artifactId>dom4j</artifactId>
        <version>1.5.2</version>
        <exclusions>
          <exclusion>
            <groupId>xerces</groupId>
            <artifactId>xmlParserAPIs</artifactId>
          </exclusion>
          <exclusion>
            <groupId>xerces</groupId>
            <artifactId>xercesImpl</artifactId>
          </exclusion>
          <exclusion><groupId>jaxme</groupId><artifactId>jaxme-api</artifactId></exclusion>
          <exclusion><groupId>jaxen</groupId><artifactId>jaxen</artifactId></exclusion>
          <exclusion><groupId>jdom</groupId><artifactId>jdom</artifactId></exclusion>
          <exclusion><groupId>xom</groupId><artifactId>xom</artifactId></exclusion>
          <exclusion><groupId>com.ibm.icu</groupId><artifactId>icu4j</artifactId></exclusion>
          <exclusion><groupId>xalan</groupId><artifactId>xalan</artifactId></exclusion>
          <exclusion><groupId>msv</groupId><artifactId>xsdlib</artifactId></exclusion>
          <exclusion><groupId>msv</groupId><artifactId>relaxngDatatype</artifactId></exclusion>
          <exclusion><groupId>pull-parser</groupId><artifactId>pull-parser</artifactId></exclusion>
          <exclusion><groupId>xpp3</groupId><artifactId>xpp3</artifactId></exclusion>
          <exclusion><groupId>stax</groupId><artifactId>stax-api</artifactId></exclusion>
        </exclusions>
      </dependency>

      <dependency>
        <groupId>javax.mail</groupId>
        <artifactId>javax.mail-api</artifactId>
        <version>1.4.5</version>
      </dependency>

      <dependency>
        <groupId>com.unboundid</groupId>
        <artifactId>unboundid-ldapsdk</artifactId>
        <version>2.3.5</version>
      </dependency>

      <dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>1.2.16</version>
      </dependency>

      <dependency>
        <groupId>javax.xml.bind</groupId>
        <artifactId>jaxb-api</artifactId>
        <version>2.3.1</version>
      </dependency>

      <dependency>
        <groupId>com.sun.xml.bind</groupId>
        <artifactId>jaxb-impl</artifactId>
        <version>2.3.2</version>
      </dependency>

    </dependencies>
  </dependencyManagement>

  <dependencies>
    <dependency>
      <groupId>com.zextras</groupId>
      <artifactId>zimbra-preprocessor</artifactId>
      <version>0.0.1-SNAPSHOT</version>
    </dependency>
  </dependencies>

  <repositories>
    <repository>
      <id>zimbra-repo</id>
      <name>zimbra-repo</name>
      <url>file://${project.basedir}/../zimbra-repo</url>
    </repository>
  </repositories>

  <build>
    <plugins>
      <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>exec-maven-plugin</artifactId>
        <version>3.0.0</version>
        <inherited>false</inherited>
        <executions>
          <execution>
            <id>generate-buildinfo</id>
            <phase>generate-sources</phase>
            <goals>
              <goal>java</goal>
            </goals>
            <configuration>
              <mainClass>com.zextras.GenerateBuildInfo</mainClass>
              <arguments>
                <argument>${project.basedir}/core</argument>
                <argument>org.openzal.zal</argument>
                <argument>ZalBuildInfo</argument>
              </arguments>
              <systemProperties>
                <systemProperty>
                  <key>PROJECT_COMMIT</key>
                  <value>${commit.id}</value>
                </systemProperty>
                <systemProperty>
                  <key>PROJECT_VERSION</key>
                  <value>1</value>
                </systemProperty>
              </systemProperties>
            </configuration>
          </execution>
          <execution>
            <id>generate-zal-sources</id>
            <phase>generate-sources</phase>
            <goals>
              <goal>java</goal>
            </goals>
            <configuration>
              <mainClass>com.zextras.PreprocessMain</mainClass>
              <arguments>
                <argument>${project.basedir}/core</argument>
              </arguments>
            </configuration>
          </execution>
        </executions>
      </plugin>
    </plugins>

    <pluginManagement>
      <plugins>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-jar-plugin</artifactId>
          <version>3.2.0</version>
          <configuration>
            <archive>
              <index>true</index>
              <manifest>
                <addClasspath>true</addClasspath>
              </manifest>
              <manifestEntries>
                <Specification-Title>Zimbra Abstraction Layer</Specification-Title>
                <Specification-Version>${project.version}</Specification-Version>
                <Specification-Commit>${commit.id}</Specification-Commit>
                <Specification-Vendor>ZeXtras</Specification-Vendor>
                <Implementation-Version>${zimbra.version}</Implementation-Version>
                <Created-By>ZeXtras</Created-By>
                <Zimbra-Extension-Class>org.openzal.zal.extension.ZalEntrypointImpl
                </Zimbra-Extension-Class>
              </manifestEntries>
            </archive>
            <excludes>
              <exclude>com/zimbra/cs/store/file/VolumeBlobProxy.class</exclude>
            </excludes>
          </configuration>
        </plugin>
        <plugin>
          <groupId>com.coderplus.maven.plugins</groupId>
          <artifactId>copy-rename-maven-plugin</artifactId>
          <version>1.0.1</version>
          <executions>
            <execution>
              <phase>compile</phase>
              <goals>
                <goal>copy</goal>
              </goals>
              <configuration>
                <sourceFile>${project.build.directory}/classes/com/zimbra/cs/store/file/VolumeBlobProxy.class</sourceFile>
                <destinationFile>${project.build.directory}/classes/com/zimbra/cs/store/file/VolumeBlobProxy</destinationFile>
              </configuration>
            </execution>
          </executions>
        </plugin>
      </plugins>
    </pluginManagement>
  </build>

  <modules>
    <module>open-zal-8.0.0</module>
    <module>open-zal-8.0.1</module>
    <module>open-zal-8.0.2</module>
    <module>open-zal-8.0.3</module>
    <module>open-zal-8.0.4</module>
    <module>open-zal-8.0.5</module>
    <module>open-zal-8.0.6</module>
    <module>open-zal-8.0.7</module>
    <module>open-zal-8.0.8</module>
    <module>open-zal-8.0.9</module>
    <module>open-zal-8.5.0</module>
    <module>open-zal-8.5.1</module>
    <module>open-zal-8.6.0</module>
    <module>open-zal-8.7.0</module>
    <module>open-zal-8.7.1</module>
    <module>open-zal-8.7.10</module>
    <module>open-zal-8.7.11</module>
    <module>open-zal-8.7.2</module>
    <module>open-zal-8.7.3</module>
    <module>open-zal-8.7.4</module>
    <module>open-zal-8.7.5</module>
    <module>open-zal-8.7.6</module>
    <module>open-zal-8.7.7</module>
    <module>open-zal-8.7.9</module>
    <module>open-zal-8.8.10</module>
    <module>open-zal-8.8.11</module>
    <module>open-zal-8.8.12</module>
    <module>open-zal-8.8.15</module>
    <module>open-zal-8.8.2</module>
    <module>open-zal-8.8.3</module>
    <module>open-zal-8.8.4</module>
    <module>open-zal-8.8.5</module>
    <module>open-zal-8.8.6</module>
    <module>open-zal-8.8.7</module>
    <module>open-zal-8.8.8</module>
    <module>open-zal-8.8.9</module>
    <module>open-zal-9.0.0</module>
    <module>open-zal-x</module>
  </modules>

</project>